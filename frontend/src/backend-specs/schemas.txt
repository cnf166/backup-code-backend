# --- ORDER SCHEMAS ---
class OrderRead(BaseModel):
    id: int
    table_id: int
    status_id: int
    guest_id: Optional[int] = None

class OrderCreate(BaseModel):
    table_id: int
    guest_id: Optional[int] = None
    status_id: Optional[int] = None  # Default = 1 (pending)

class OrderItemRead(BaseModel):
    id: int
    order_id: int
    dish_id: int
    status_id: int
    quantity: int
    # Relations (Nested objects often returned by ORM)
    dish: DishRead
    status: OrderItemStatusRead

# --- PAYMENT SCHEMAS ---
class Payment(BaseModel):
    id: int 
    booking_id: int 
    amount: float
    currency: str
    method_id: int 
    provider_id: int 
    status_id: int 
    paid_at: datetime | None = None
    qr_url: str | None = None 

class PaymentCreate(BaseModel):
    booking_id: int
    currency: str
    amount: float
    method_id: int
    provider_id: int

# --- RESOURCE SCHEMAS ---
class DishRead(BaseModel):
    id: int
    name: str
    price: Decimal
    description: str | None = None

class TableRead(BaseModel):
    id: int
    number: int
    seats: int

class IngredientRead(BaseModel):
    id: int
    name: str
    unit_id: int
    quantity: float
    threshold: float